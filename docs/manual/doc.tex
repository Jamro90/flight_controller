\documentclass{book}

\usepackage{subcaption}
\usepackage{longtable}
\usepackage{xcolor}
\usepackage{geometry}
\usepackage{ragged2e}
\usepackage{float}
\usepackage{listings}
\usepackage{caption}
\usepackage{hyperref}
\usepackage{titlesec}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{fmtcount}
\usepackage{fancyhdr}
\usepackage{lipsum}
\usepackage{wrapfig}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,positioning}
\usepackage[most]{tcolorbox}
\usepackage{xurl}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}

\begin{document}
\title{Projek kontrolera lotu}
\author{Krzysztof Jamrozy}
\date{}

\maketitle
% color style define for code listing
\definecolor{comments}{rgb}{0.94,0.45,0.36}
\definecolor{black_numbers}{rgb}{0.08,0.1,0.09}
\definecolor{blue_keywords}{rgb}{0.03,0.26,0.4}
\definecolor{back_raywhite}{rgb}{0.98,0.98,0.98}
\definecolor{red_strings}{rgb}{0.8,0.07,0.25}

\lstdefinestyle{mystyle}{
backgroundcolor=\color{back_raywhite},   
commentstyle=\color{comments},
keywordstyle=\color{blue_keywords},
numberstyle=\tiny\color{black_numbers},
stringstyle=\color{red_strings},
basicstyle=\ttfamily\normalsize,
breakatwhitespace=false,         
breaklines=true,                 
captionpos=b,                    
keepspaces=true,                 
numbers=left,                    
numbersep=5pt,                  
showspaces=false,                
showstringspaces=false,
showtabs=false,                  
tabsize=2
}

\lstset{style=mystyle}

\makeatletter

% global command to unified table height
\renewcommand*\l@section{\@dottedtocline{1}{1.5em}{2.3em}}

% redefinition of table of contents
\renewcommand*{\contentsname}{Spis treści}

% redefinition of chapter label
\renewcommand*{\chaptername}{Rozdział}
% redefinition of table label
\renewcommand*{\tablename}{Tabela}
% redefinition of appendix label
\renewcommand*{\appendixname}{Dodatek}
% redefinition of list of tables
\renewcommand*{\listtablename}{Wykaz tabel}
% redefinition of list of tables
\renewcommand*{\listfigurename}{Wykaz rysunków}

% page numbering style definition
\pagestyle{fancy}
\fancyhead[LE]{\slshape \rightmark}
\fancyhead[RO]{\slshape \leftmark}
\fancyhead[LO,RE]{\thepage}
\cfoot{}

\makeatother

% caption redefinition
\captionsetup[figure]{name=Rys.}

\tableofcontents
\thispagestyle{empty}

% input section
\chapter{Wprowadzenie}
\input{chapters/Wprowadzenie/wstep.tex}
\input{chapters/Wprowadzenie/przeznaczenie.tex}
\input{chapters/Wprowadzenie/zalozenia_konstrukcyjne.tex}

\chapter{Realizacja sprzętowa - hardware}
\input{chapters/Hardware/wymagania_sprzetowe.tex}
\input{chapters/Hardware/stm32f1.tex}
\input{chapters/Hardware/akcelerometr.tex}

\chapter{Realizacja programowa - software}
\input{chapters/Software/narzedzia_programistyczne.tex}
\input{chapters/Software/oprogramowanie_klienta.tex}
\input{chapters/Software/oprogramowanie_serwera.tex}
\input{chapters/Software/baza_danych.tex}

\listoffigures
\listoftables

\appendix
% appending section

% listing code (example)
\chapter{Kod źródłowy}
\thispagestyle{empty}
% main.c file listed
\newgeometry{a4paper,margin=20mm}
\lstinputlisting[language=C]{../../src/controller_stm32/main.c}
\end{document}
